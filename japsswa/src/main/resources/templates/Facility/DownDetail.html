<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{/layout/index}" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
    <link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
    <script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>
    <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <style>
    h4 {
            text-align: center;
        }
        .tui-grid-cell-content {
            text-align: center;
        }
    </style>
</head>

<body>
    <th:block layout:fragment="content">
        <h4>비가동 내역 리스트</h4>
        <div id="grid"></div>

        <script>
            function getDetailList() {

                $.ajax({
                    url: "/downDetailAjax",
                    method: "GET",
                    dataType: "JSON",
                    success: function (result) {
                        grid.resetData(result);
                        console.log(result);
                    },
                    error: function (reject) {
                        alert("실패");
                        console.log(reject);
                    }
                });
            }

            getDetailList();

            const grid = new tui.Grid({
                el: document.getElementById('grid'),
                scrollX: false,
                scrollY: false,
                pageOptions: {
                    useClient: true,
                    perPage: 15
                },
                columns: [{
                        header: '비가동 코드',
                        name: 'downCode'
                    },
                    {
                        header: '설비 코드',
                        name: 'facCode'
                    },
                    {
                        header: '설비 가동일시',
                        name: 'startDate'
                    },
                    {
                        header: '설비 비가동일시',
                        name: 'stopDate'
                    },
                    {
                        header: '설비 비가동사유',
                        name: 'downReason'
                    },
                    {
                        header: '관리자',
                        name: 'downManager'
                    },
                    {
                        header: '비고',
                        name: 'remark'
                    }
                ]
            });
        </script>
    </th:block>
</body>

</html>