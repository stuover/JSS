<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
 xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">


<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PolluxUI Admin</title>
<!-- base:css -->
<link rel="stylesheet" href="/vendors/typicons/typicons.css">
<link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
<!-- endinject -->
<!-- plugin css for this page -->
<!-- End plugin css for this page -->
<!-- inject:css -->
<link rel="stylesheet" href="/css/vertical-layout-light/style.css">
<!-- endinject -->
<link rel="shortcut icon" href="/images/favicon.png" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">

<script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
<link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
<script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>
<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>


<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>


<meta name="_csrf" th:content="${_csrf.token}"/>
<meta name="_csrf_header" th:content="${_csrf.headerName}"/>

</head>
<body>
	<!-- partial -->
	<nav class="navbar-breadcrumb col-xl-12 col-12 d-flex flex-row p-0">
		<div class="navbar-links-wrapper d-flex align-items-stretch">
			<div class="nav-link">
				<a href="javascript:;"><i class="typcn typcn-calendar-outline"></i></a>
			</div>
			<div class="nav-link">
				<a href="javascript:;"><i class="typcn typcn-mail"></i></a>
			</div>
			<div class="nav-link">
				<a href="javascript:;"><i class="typcn typcn-folder"></i></a>
			</div>
			<div class="nav-link">
				<a href="javascript:;"><i class="typcn typcn-document-text"></i></a>
			</div>
		</div>

	</nav>
	
	<div class="container-fluid page-body-wrapper">
	 	<div class="col-12 grid-margin stretch-card">
	        <div class="card">
	            <div class="card-body">
				
	            <!-- Body Start -->
	                
	                  
	                <input id="afterSearch" type="hidden" name="selectResult" value="insert">
	                <input id="empName" type="hidden" th:value="${#authentication.principal.empName}">
	
					<div class="h-auto d-md-flex justify-content-between">
						<div><h3 class="page-title">생산 실적 관리</h3></div>
						<div><button type="button" id="insertBtn" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#insertModal">등록</button></div>
					</div>
					
	            <!-- Card Content Start --> 
					<div class="p-2 row">
						<div class="col-sm-12">
							<div class="card">
								<div class="card-body">
								<!-- card-body start -->
					        
								<div id=""></div>
		                  
						     
								<div class="m-2 col-9">	
									
									
									<div class="m-2 d-grid gap-2 d-md-flex justify-content-between">
										<div><h5 class="m-2 fw-bold fs-4 card-title">공정</h5></div>
										<div><button type="button" id="searchProBtn" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#searchModal">조회</button></div>
									</div>

									<div id="processGrid"></div>
								</div>
								
								
								<div class="m-3 row"></div>
								
								<div class="m-2 col-9">	
									
									
									<div class="m-2 d-grid gap-2 d-md-flex justify-content-between">
										<div><h5 class="m-2 fw-bold fs-4 card-title">작업지시</h5></div>
										<div><button type="button" id="searchWorkBtn" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#searchModal">조회</button></div>
									</div>
										
									<div id="workGrid"></div>
								</div>
									
								<div class="m-4 row"></div>							
								<div id="workDetailGrid"></div>

								<!-- Card-body end -->
								</div>
							</div>
						</div>
					</div>
				<!-- Card Content End -->      
	                 
				<!-- Body End -->
				</div>
			</div>
		</div>
	</div>
	
	
	<script>
		const token = $("meta[name='_csrf']").attr("content")
		const header = $("meta[name='_csrf_header']").attr("content");
		
		// 초기화면 데이터 및 설정.
		window.onload = function(){
			
			
			// 모달창 열릴 때 레이아웃 깨지지 않게 refreshLayout()
			
		}
		
		// 작업자 -> 해당 공정 조회 및 선택
		let processGridData = [{}];
		const processGrid = new tui.Grid({
			el: document.getElementById('processGrid'),
			data: processGridData,
			scrollX: false,
			scrollY: false,
			columnOptions: {
				maxWidth: 180
			},
			columns: [
				{
				  header: '공정코드',
				  name: 'proCode'
				},
				{
				  header: '공정명',
				  name: 'proName'
				}
			]
		})
		
		// 작업자 -> 해당 작업지시 조회 및 선택
		let workGridData = [{}];
		const workGrid = new tui.Grid({
			el: document.getElementById('workGrid'),
			data: workGridData,
			scrollX: false,
			scrollY: false,
			columnOptions: {
				maxWidth: 180
			},
			columns: [
				{
				  header: '작업지시명',
				  name: 'workName'
				},
				{
				  header: '작업지시 날짜',
				  name: 'workDate'
				},
				{
				  header: '담당자',
				  name: 'empName2'
				}				
			]
		})
		
		
		// 작업지시 조회결과 : 작업지시 상세내역
		let workDetailGridData = [];
		const workDetailGrid = new tui.Grid({
		el: document.getElementById('workDetailGrid'),
		data: workDetailGridData,
		rowHeaders: ['checkbox'],
		scrollX: false,
		scrollY: false,
		columns: [
			{
				header: '세부지시 코드',
				name: 'wdetailId',
				hidden: true
			 },
			 {
				header: '제품코드',
				name: 'itemCode',
				hidden: true
			  },
			  {
				header: '제품명',
				name: 'itemName',
				editot: 'text'
			  },
			  {
				header: '지시 시작날짜',
				name: 'workStart',
				formatter: function (e) {
					let result = e.value;
					
					if(result == null) {
						result = e.value;
						return;
					} else {
						result = e.value.substr(0,10);
						return;
					}
				 },
				editor: 'datePicker'
			  },
			  {
				header: '지시 완료날짜',
				name: 'workEnd',
				formatter: function (e) {
					let result = e.value;
					if(result == null) {
						result = e.value;
						return;
					} else {
						result = e.value.substr(0,10);
						return;
					}
			  },
				editor: 'datePicker'
			  },
			  {
				header: '지시수량',
				name: 'workAmount',
				editor: 'text'
			  }
			 ]
		   });
		
		
	
	
	</script>
	
	

	<!-- base:js -->
	<script src="/vendors/js/vendor.bundle.base.js"></script>
	<!-- endinject -->
	<!-- Plugin js for this page-->
	<script src="/vendors/chart.js/Chart.min.js"></script>
	<!-- End plugin js for this page-->
	<!-- inject:js -->
	<script src="/js/off-canvas.js"></script>
	<script src="/js/hoverable-collapse.js"></script>
	<script src="/js/template.js"></script>
	<script src="/js/settings.js"></script>
	<script src="/js/todolist.js"></script>
	<!-- endinject -->
	<!-- Custom js for this page-->
	<script src="/js/dashboard.js"></script>
	<!-- End custom js for this page-->
</body>

</html>

